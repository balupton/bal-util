// Generated by CoffeeScript 1.3.3
(function() {
  var assert, balUtil, joe, wait;

  assert = (typeof require === "function" ? require('assert') : void 0) || this.assert;

  joe = (typeof require === "function" ? require('joe') : void 0) || this.joe;

  balUtil = (typeof require === "function" ? require(__dirname + '/../lib/balutil') : void 0) || this.balUtil;

  wait = function(delay, fn) {
    return setTimeout(fn, delay);
  };

  joe.suite('html', function(suite, test) {
    test('replaceElement', function() {
      var actual, expected, replaceElementCallback, source;
      source = "start\n<text>\n	a\n		b\n	c\n</text>\nmiddle\n<text>\n	one\n		two\n	three\n</text>\nfinish";
      expected = "start\nA\n	B\nC\nmiddle\nONE\n	TWO\nTHREE\nfinish";
      replaceElementCallback = function(outerHTML, elementNameMatched, attributes, innerHTML) {
        return innerHTML.toUpperCase();
      };
      actual = balUtil.replaceElement(source, "text", replaceElementCallback);
      return assert.equal(expected, actual);
    });
    return test('replaceElementAsync', function(done) {
      var expected, replaceElementCallback, source;
      source = "start\n<text>\n	a\n		b\n	c\n</text>\nmiddle\n<text>\n	one\n		two\n	three\n</text>\nfinish";
      expected = "start\nA\n	B\nC\nmiddle\nONE\n	TWO\nTHREE\nfinish";
      replaceElementCallback = function(outerHTML, elementNameMatched, attributes, innerHTML, callback) {
        return balUtil.wait(1000, function() {
          return callback(null, innerHTML.toUpperCase());
        });
      };
      return balUtil.replaceElementAsync(source, "text", replaceElementCallback, function(err, actual) {
        if (err) {
          return done(err);
        }
        assert.equal(expected, actual);
        return done();
      });
    });
  });

}).call(this);
